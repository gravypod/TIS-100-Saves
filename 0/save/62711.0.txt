@0
MOV 0 RIGHT
L: MOV UP ACC
   JEZ DONE
   MOV ACC RIGHT
   JMP L
DONE: MOV 0 RIGHT
      MOV 1 DOWN
      JRO 0

@1
MOV UP DOWN

@2
MOV UP RIGHT

@3
MOV LEFT NIL
RST:MOV RIGHT NIL
READ: MOV UP DOWN
REA2: MOV UP ACC
     MOV ACC DOWN
     JNZ REA2
REVE:MOV DOWN UP
REV2:MOV DOWN ACC
     MOV ACC UP
     MOV ACC RIGHT
     JNZ REV2
MOV -1 RIGHT
JMP RST

@4
DONE:MOV UP ACC
SAV
MOV 0 LEFT
LOOP:SWP
     MOV LEFT ACC
     SWP
     SUB 1
     JGZ LOOP
     JEZ LOOP
SEND:SWP
     MOV ACC DOWN
ALL:MOV LEFT ACC
    JLZ DONE
    JMP ALL

@5


@6


@7
MOV UP DOWN

@8

